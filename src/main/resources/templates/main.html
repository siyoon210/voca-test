<!DOCTYPE html>
<!--[if lt IE 7]>
<html lang="en" class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>
<html lang="en" class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>
<html lang="en" class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!-->
<html lang="en" class="no-js"> <!--<![endif]-->
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>단어 테스트</title>

    <!-- jQuery -->
    <script src="../static/js/jquery.min.js"></script>
    <!-- jsRender -->
    <script src="../static/js/jsrender.min.js"></script>
    <!-- jsViews -->
    <script src="../static/js/jsviews.min.js"></script>

    <link rel="import" href="range-select.html">

    <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
    <link rel="shortcut icon" href="favicon.ico">

    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700,300' rel='stylesheet' type='text/css'>

    <link rel="stylesheet" href="../static/css/bootstrap.min.css">
    <link rel="stylesheet" href="../static/css/animate.css">
    <link rel="stylesheet" href="../static/css/style.css">


    <!-- Modernizr JS -->
    <script src="../static/js/modernizr-2.6.2.min.js"></script>
    <!-- FOR IE9 below -->
    <!--[if lt IE 9]>
    <script src="../static/js/respond.min.js"></script>
    <![endif]-->
</head>
<body class="container"></body>

<script>
    (function () {
        const domain = "http://localhost:8080";
        const tmpBookId = 1;

        const eventHandlers = {
            requestData: function () {
                const start = $('#start').val();
                const end = $('#end').val();

                $.ajax({
                    url: domain + '/api/books/' + tmpBookId + '/vocas' + '?start=' + start + '&end=' + end,
                    method: "get"
                }).done(function (res) {
                    console.log('SUCCESS', res[0]);
                }).fail(function (res) {
                    console.log('ERROR', res);
                });
            }
        };

        function render(template, appendTarget, data) {
            $.templates(template).link(appendTarget || 'body', data, eventHandlers);
        }

        function get(url) {
            return new Promise(function (resolve, reject) {
                $.get(url, function (response) {
                    resolve(response);
                    reject(response);
                });
            });
        }

        const routes = {
            '': function () {
                get('range-select.html')
                    .then(template => render(template));
            },
            'service': function () {
                get('/data/service.json')
                    .then(res => render(res));
            },
            otherwise() {
                root.innerHTML = `${location.hash} Not Found`;
            }
        };

        function router() {
            const hash = location.hash.replace('#', '');
            (routes[hash] || routes.otherwise)();
        }

        $(window)
            .bind('hashchange', router)
            .bind('DOMContentLoaded', router);
    }());
</script>

<!-- Bootstrap -->
<script src="../static/js/bootstrap.min.js"></script>
<!-- Placeholder -->
<script src="../static/js/jquery.placeholder.min.js"></script>
<!-- Waypoints -->
<script src="../static/js/jquery.waypoints.min.js"></script>
<!-- Main JS -->
<script src="../static/js/main.js"></script>

</html>